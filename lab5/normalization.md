# Лабораторна робота №5: Нормалізація бази даних

## 1. Аналіз ненормалізованої схеми (UNF/1NF)
Вихідна таблиця `denormalized_orders` (файл `ddl-old.sql`) містить надлишкові дані. В одній таблиці зберігається інформація про покупця, товар та деталі доставки.

**Проблеми (Аномалії):**
* **Аномалія вставки:** Неможливо додати нового покупця, поки він не зробить замовлення.
* **Аномалія оновлення:** Якщо у покупця зміниться телефон, потрібно оновлювати всі його старі замовлення.
* **Аномалія видалення:** Якщо видалити замовлення, ми можемо втратити дані про товар або покупця.

**Функціональні залежності:**
* `buyer_email` -> `buyer_full_name`, `buyer_phone` (Транзитивна залежність)
* `product_name` -> `product_price`, `category_name` (Транзитивна залежність)
* `shipping_zip` -> `shipping_city`

## 2. Перехід до Другої Нормальної Форми (2NF)
Для досягнення 2NF ми розділяємо дані, щоб усунути часткові залежності. Ми виносимо сутності, які мають власні ключі.

**Розділення на таблиці:**
1.  **Users/Buyers**: Інформація про клієнтів (`buyer_email`, `phone`...).
2.  **Products**: Інформація про товари (`name`, `price`, `category`).
3.  **Orders**: Факти замовлення (`date`, `buyer_id`).

## 3. Перехід до Третьої Нормальної Форми (3NF)
Ми усуваємо транзитивні залежності (коли неключове поле залежить від іншого неключового поля).

**Зміни:**
1.  Категорії винесено в окрему таблицю `category` (товар посилається на `category_id`).
2.  Адреси винесено в таблицю `address`, щоб уникнути дублювання міст та індексів у замовленнях.
3.  Деталі замовлення (кількість, ціна на момент покупки) винесено в `order_item` для зв'язку "Багато-до-багатьох" між замовленнями та товарами.

## 4. Фінальна схема (Result)
Фінальна схема (файл `normalization.sql`) знаходиться в 3NF. Всі таблиці мають первинні ключі, зв'язки реалізовані через Foreign Keys, дублювання даних відсутнє.